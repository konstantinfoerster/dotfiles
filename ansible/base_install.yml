---
- hosts: localhost
  become: true
  gather_facts: true
  vars:
    - main_disk: /dev/sda
    - main_disk_password: "test123"
    - crypted_disk_name: cryptdisk

  tasks:
    - name: Running from iso?
      ansible.builtin.command: uname -a
      register: uname_out
    - name: Show facts
      debug: 
        var: "Target host {{ uname_out }}"
    - name: Setup hard drive
      import_tasks: tasks/storage.yml
    - name: Prepare base system
      import_tasks: tasks/prepare_base.yml


- import_playbook: main.yml
  tags:
    - always
